import{c as B,r as i,b5 as Re,b6 as Ve,b7 as $e,b8 as Le,b9 as Ee,j as e,ba as E,bb as Fe,bc as F,bd as Be,be as o,bf as d,bg as x,bh as Ae,bi as de,bj as p,bk as We,bl as h,bm as De,bn as He,bo as ue,n as me,C as he,bp as Ye,bq as Ge,br as Je,bs as R,bt as u,bu as Qe}from"./index-atOEl8ju.js";/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Ke=B("square-pen",Ue);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Ze=B("trash-2",Xe);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const es=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]],ss=B("wrench",es),pe="/assets/registergarden-QSJN-uo0.jpg",{Option:f}=p,{Title:rs,Text:as}=De,ts=Array.from({length:11},(m,y)=>({value:y,label:y===0?"Less than 1 year":`${y} year${y>1?"s":""}`})).concat({value:15,label:"15 years"},{value:20,label:"20+ years"}),ls=[{value:"Cash",label:"Cash"},{value:"Bank Transfer",label:"Bank Transfer"}],is=[{value:"english",label:"English"},{value:"arabic",label:"Arabic"},{value:"hindi",label:"Hindi"},{value:"french",label:"French"}],os=()=>{var X,Z,ee,se,re,ae,te,le,ie,ne,oe;const[m,y]=i.useState(0),[C,g]=i.useState({subcategories:!0,types:{},submitting:!1,otpSending:!1,otpVerifying:!1}),[ge,be]=i.useState(!1),[_,xe]=i.useState("+971"),[j,fe]=i.useState(""),ye=i.useMemo(()=>Re.getAll(),[]),[v,A]=i.useState(!1),[P,V]=i.useState(!1),[I,W]=i.useState(""),{control:c,handleSubmit:je,setValue:N,trigger:D,watch:H,register:Y,setError:M,clearErrors:k,formState:{errors:t}}=Ve({mode:"onChange"});i.useEffect(()=>{Y("mobile_number",{required:"Mobile number is required",minLength:{value:5,message:"Number is too short"}})},[Y]);const b=H("country"),q=H("state"),G=i.useMemo(()=>$e.getAllCountries(),[]),J=i.useMemo(()=>b?Le.getStatesOfCountry(b):[],[b]),ve=i.useMemo(()=>b&&q?Ee.getCitiesOfState(b,q):[],[b,q]);i.useEffect(()=>{N("state",null),N("city",null)},[b,N]),i.useEffect(()=>{N("city",null)},[q,N]);const[S,z]=i.useState([{subcategoryId:"",types:[],description:"",unit:"per job"}]),[$,Se]=i.useState([]),[Q,we]=i.useState([]),[Ce,_e]=i.useState({});i.useEffect(()=>{(async()=>{try{const r=await R.get("/estimate/master/category/name/Landscaping/subcategories");r.success&&we(r.data||[])}catch{u.error("Error loading services")}finally{g(r=>({...r,subcategories:!1}))}})()},[]);const Ne=async(s,r)=>{if(!s)return;const a=Q.find(l=>l._id===s);if(a!=null&&a.category){g(l=>({...l,types:{...l.types,[r]:!0}}));try{const l=await R.get(`/estimate/master/category/${a.category}/subcategories/${s}/types`);if(l.success){const O=(l.data||[]).map(w=>({value:w._id,label:w.label}));_e(w=>({...w,[r]:O}))}}catch{u.error("Error loading specializations")}finally{g(l=>({...l,types:{...l.types,[r]:!1}}))}}},qe=(s,r)=>{const a=[...S];a[s].subcategoryId=r,a[s].types=[],z(a),Ne(r,s)},Pe=(s,r)=>{const a=[...S];a[s].types=r,z(a)},ke=()=>z(s=>[...s,{subcategoryId:"",types:[],description:"",unit:"per job"}]),ze=s=>z(r=>r.filter((a,l)=>l!==s)),Ie=async()=>{var r,a;if(!j){M("mobile_number",{type:"manual",message:"Mobile number is required"});return}const s=`${_}${j}`;if(!Qe(s)){M("mobile_number",{type:"manual",message:`Invalid number format for ${_}`});return}g(l=>({...l,otpSending:!0}));try{u.success(`OTP sent to ${s}`),V(!0),k("mobile_number")}catch(l){u.error(((a=(r=l.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to send OTP")}finally{g(l=>({...l,otpSending:!1}))}},Me=async()=>{var s,r;if(!I||I.length<4)return u.error("Please enter a valid OTP");g(a=>({...a,otpVerifying:!0}));try{await R.post("/otp/verify-otp",{country_code:_,phone_number:j,otp:I}),u.success("Mobile number verified successfully!"),A(!0),V(!1),k("mobile_number")}catch(a){u.error(((r=(s=a.response)==null?void 0:s.data)==null?void 0:r.message)||"Invalid OTP. Please try again.")}finally{g(a=>({...a,otpVerifying:!1}))}},Te=()=>{A(!1),V(!1),W("")},U=async()=>{let s=!0;if(m===0){const a=await D(["first_name","last_name","email","password","confirmPassword","mobile_number"]);v?a&&k("mobile_number"):(M("mobile_number",{type:"manual",message:"Please verify your mobile number first"}),s=!1),a||(s=!1)}else m===1&&(await D(["experience_years","bio","country","state","city"])||(s=!1));s&&y(r=>r+1)},K=()=>y(s=>s-1),Oe=async s=>{var O,w,ce;if(s.password!==s.confirmPassword){M("confirmPassword",{type:"manual",message:"Passwords do not match"});return}if($.length===0)return u.error("Please select at least one language");if(S.some(n=>!n.subcategoryId||n.types.length===0||!n.description))return u.error("Please complete all service fields");g(n=>({...n,submitting:!0}));const r=((O=G.find(n=>n.isoCode===s.country))==null?void 0:O.name)||s.country,a=((w=J.find(n=>n.isoCode===s.state))==null?void 0:w.name)||s.state,l={email:s.email,password:s.password,confirm_password:s.confirmPassword,name:{first_name:s.first_name,last_name:s.last_name},mobile:{country_code:_,number:j.replace(/\D/g,"")},is_mobile_verified:v,location:{country:r,state:a,city:s.city},professional:{experience_years:Number(s.experience_years),bio:s.bio,skills:[],availability:"Full-time"},services_offered:S.map(n=>({category:n.subcategoryId,subcategories:n.types,description:n.description,unit:n.unit})),payment:{preferred_method:s.preferred_method},languages:$,meta:{agreed_to_terms:!0}};try{await R.post("/freelancer",l),be(!0),u.success("Registration successful!")}catch(n){const L=(ce=n.response)==null?void 0:ce.data;u.error((L==null?void 0:L.message)||"Registration failed")}finally{g(n=>({...n,submitting:!1}))}},T=(s,r)=>((r==null?void 0:r.label)??"").toLowerCase().includes(s.toLowerCase());return ge?e.jsx("div",{className:"min-h-screen bg-cover bg-center flex items-center justify-center p-6",style:{backgroundImage:`linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.7)), url(${pe})`},children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-10 max-w-md w-full text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(E,{className:"w-12 h-12 text-purple-600"})}),e.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Registration Successful!"}),e.jsxs("p",{className:"text-gray-600 mb-8",children:["Your request has been sent to the ",e.jsx("strong",{children:"Super-Admin"}),"."]}),e.jsxs("a",{href:"/login",className:"inline-flex items-center gap-2 bg-purple-600 text-white px-8 py-3 rounded-lg font-medium hover:bg-purple-700 transition",children:["Go to Login ",e.jsx(Fe,{className:"w-5 h-5"})]})]})}):e.jsx("div",{className:"min-h-screen bg-cover bg-center flex items-center justify-center p-6",style:{backgroundImage:`linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.6)), url(${pe})`},children:e.jsx("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-6xl overflow-hidden",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4",children:[e.jsxs("div",{className:"bg-gradient-to-b from-purple-700 to-purple-900 text-white p-8",children:[e.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Join as a Pro"}),e.jsx("p",{className:"text-purple-200 mb-8",children:"Grow your landscaping business"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:`flex items-center gap-3 ${m>=0?"text-white":"text-purple-300"}`,children:[e.jsx(F,{className:"w-6 h-6"})," Basic Info"]}),e.jsxs("div",{className:`flex items-center gap-3 ${m>=1?"text-white":"text-purple-300"}`,children:[e.jsx(Be,{className:"w-6 h-6"})," Professional"]}),e.jsxs("div",{className:`flex items-center gap-3 ${m>=2?"text-white":"text-purple-300"}`,children:[e.jsx(ss,{className:"w-6 h-6"})," Services"]})]})]}),e.jsxs("div",{className:"lg:col-span-3 p-10",children:[e.jsx("h2",{className:"text-4xl font-bold text-gray-800 mb-2",children:"Execution Partners Registration"}),e.jsxs("p",{className:"text-gray-600 mb-8",children:["Step ",m+1," of 3"]}),e.jsxs(o,{layout:"vertical",onFinish:je(Oe),children:[m===0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(o.Item,{label:"First Name",required:!0,validateStatus:t.first_name?"error":"",help:(X=t.first_name)==null?void 0:X.message,children:e.jsx(d,{name:"first_name",control:c,rules:{required:"Required"},render:({field:s})=>e.jsx(x,{prefix:e.jsx(F,{}),size:"large",...s})})}),e.jsx(o.Item,{label:"Last Name",required:!0,validateStatus:t.last_name?"error":"",help:(Z=t.last_name)==null?void 0:Z.message,children:e.jsx(d,{name:"last_name",control:c,rules:{required:"Required"},render:({field:s})=>e.jsx(x,{prefix:e.jsx(F,{}),size:"large",...s})})})]}),e.jsx(o.Item,{label:"Email",required:!0,validateStatus:t.email?"error":"",help:(ee=t.email)==null?void 0:ee.message,children:e.jsx(d,{name:"email",control:c,rules:{required:"Required",pattern:{value:/^\S+@\S+$/i,message:"Invalid email"}},render:({field:s})=>e.jsx(x,{prefix:e.jsx(Ae,{}),size:"large",...s})})}),e.jsxs(o.Item,{label:e.jsxs(de,{children:[e.jsx("span",{children:"Mobile Number"}),v&&e.jsx(He,{color:"success",icon:e.jsx(E,{size:12}),children:"Verified"})]}),required:!0,validateStatus:t.mobile_number?"error":"",help:(se=t.mobile_number)==null?void 0:se.message,children:[e.jsxs(de.Compact,{style:{width:"100%"},children:[e.jsx(p,{showSearch:!0,value:_,onChange:s=>{var r;xe(s),((r=t.mobile_number)==null?void 0:r.type)==="manual"&&k("mobile_number")},style:{width:"30%",minWidth:"110px"},placeholder:"Code",size:"large",optionFilterProp:"label",filterOption:T,disabled:P||v,children:ye.map((s,r)=>e.jsx(f,{value:s.dial_code,label:`${s.name} ${s.dial_code}`,children:e.jsxs("span",{children:[s.flag," ",s.dial_code]})},`${s.code}-${r}`))}),e.jsx(x,{prefix:e.jsx(We,{size:16}),value:j,onChange:s=>{var a;const r=s.target.value.replace(/\D/g,"");fe(r),N("mobile_number",r,{shouldValidate:!0}),((a=t.mobile_number)==null?void 0:a.type)==="manual"&&k("mobile_number")},placeholder:"501234567",size:"large",style:{width:"50%"},disabled:P||v}),!v&&!P&&e.jsx(h,{type:"primary",size:"large",onClick:Ie,disabled:!j,loading:C.otpSending,style:{width:"20%",minWidth:"100px"},children:"Send OTP"}),(P||v)&&e.jsx(h,{size:"large",icon:e.jsx(Ke,{size:16}),onClick:Te,style:{width:"20%",minWidth:"100px"},children:"Change"})]}),P&&e.jsxs("div",{className:"mt-4 p-4 bg-gray-50 border border-purple-100 rounded-lg",children:[e.jsxs(as,{type:"secondary",className:"block mb-3",children:["Enter the 6-digit code sent to ",e.jsxs("strong",{children:[_," ",j]})]}),e.jsxs("div",{className:"flex gap-3 items-center",children:[e.jsx(x,{placeholder:"Enter OTP",maxLength:6,value:I,onChange:s=>W(s.target.value),size:"large",style:{width:"200px"}}),e.jsx(h,{type:"primary",onClick:Me,loading:C.otpVerifying,style:{backgroundColor:"#1677ff",borderColor:"#1677ff"},size:"large",children:"Verify OTP"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(o.Item,{label:"Password",required:!0,validateStatus:t.password?"error":"",help:(re=t.password)==null?void 0:re.message,children:e.jsx(d,{name:"password",control:c,rules:{required:"Required",minLength:{value:6,message:"Min 6 characters"}},render:({field:s})=>e.jsx(x.Password,{prefix:e.jsx(ue,{}),size:"large",...s})})}),e.jsx(o.Item,{label:"Confirm Password",required:!0,validateStatus:t.confirmPassword?"error":"",help:(ae=t.confirmPassword)==null?void 0:ae.message,children:e.jsx(d,{name:"confirmPassword",control:c,rules:{required:"Required"},render:({field:s})=>e.jsx(x.Password,{prefix:e.jsx(ue,{}),size:"large",...s})})})]}),e.jsx("div",{className:"text-right mt-8",children:e.jsxs(h,{type:"primary",size:"large",onClick:U,style:{backgroundColor:"#5C039B",borderColor:"#5C039B"},children:["Next ",e.jsx(me,{className:"inline"})]})})]}),m===1&&e.jsxs(e.Fragment,{children:[e.jsx(o.Item,{label:"Years of Experience",required:!0,validateStatus:t.experience_years?"error":"",help:(te=t.experience_years)==null?void 0:te.message,children:e.jsx(d,{name:"experience_years",control:c,rules:{required:"Required"},render:({field:s})=>e.jsx(p,{size:"large",placeholder:"Select years",...s,children:ts.map(r=>e.jsx(f,{value:r.value,children:r.label},r.value))})})}),e.jsx(o.Item,{label:"Professional Bio",required:!0,validateStatus:t.bio?"error":"",help:(le=t.bio)==null?void 0:le.message,children:e.jsx(d,{name:"bio",control:c,rules:{required:"Required",minLength:{value:10,message:"Min 10 chars"}},render:({field:s})=>e.jsx(x.TextArea,{rows:5,size:"large",...s})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(o.Item,{label:"Country",required:!0,validateStatus:t.country?"error":"",help:(ie=t.country)==null?void 0:ie.message,children:e.jsx(d,{name:"country",control:c,rules:{required:"Required"},render:({field:s})=>e.jsx(p,{...s,size:"large",placeholder:"Select country",showSearch:!0,optionFilterProp:"label",filterOption:T,children:G.map(r=>e.jsxs(f,{value:r.isoCode,label:r.name,children:[r.flag," ",r.name]},r.isoCode))})})}),e.jsx(o.Item,{label:"State/Emirate",required:!0,validateStatus:t.state?"error":"",help:(ne=t.state)==null?void 0:ne.message,children:e.jsx(d,{name:"state",control:c,rules:{required:"Required"},render:({field:s})=>e.jsx(p,{...s,size:"large",placeholder:b?"Select State":"Select Country first",disabled:!b,showSearch:!0,optionFilterProp:"label",filterOption:T,children:J.map(r=>e.jsx(f,{value:r.isoCode,label:r.name,children:r.name},r.isoCode))})})}),e.jsx(o.Item,{label:"City",required:!0,validateStatus:t.city?"error":"",help:(oe=t.city)==null?void 0:oe.message,children:e.jsx(d,{name:"city",control:c,rules:{required:"Required"},render:({field:s})=>e.jsx(p,{...s,size:"large",placeholder:q?"Select City":"Select State first",disabled:!q,showSearch:!0,optionFilterProp:"label",filterOption:T,children:ve.map(r=>e.jsx(f,{value:r.name,label:r.name,children:r.name},r.name))})})})]}),e.jsxs("div",{className:"flex justify-between mt-8",children:[e.jsxs(h,{size:"large",onClick:K,children:[e.jsx(he,{})," Back"]}),e.jsxs(h,{type:"primary",size:"large",onClick:U,style:{backgroundColor:"#5C039B",borderColor:"#5C039B"},children:["Next ",e.jsx(me,{})]})]})]}),m===2&&e.jsxs(Ye,{spinning:C.submitting,children:[S.map((s,r)=>e.jsxs("div",{className:"border border-gray-200 rounded-2xl p-8 mb-10 relative bg-gray-50",children:[S.length>1&&e.jsx(h,{danger:!0,onClick:()=>ze(r),className:"absolute top-6 right-6",children:e.jsx(Ze,{className:"w-5 h-5"})}),e.jsxs(rs,{level:3,className:"mb-8",children:["Service ",r+1]}),e.jsx(o.Item,{label:"What service do you offer?",required:!0,children:e.jsx(p,{size:"large",placeholder:"Select a service category",value:s.subcategoryId||void 0,onChange:a=>qe(r,a),loading:C.subcategories,showSearch:!0,optionFilterProp:"children",className:"w-full",children:Q.map(a=>e.jsx(f,{value:a._id,children:a.label},a._id))})}),s.subcategoryId&&e.jsx(o.Item,{label:"Specializations (Multiple)",required:!0,className:"mb-6",children:e.jsx(p,{mode:"multiple",loading:C.types[r],value:s.types,onChange:a=>Pe(r,a),placeholder:"Select your specializations",size:"large",children:(Ce[r]||[]).map(a=>e.jsx(f,{value:a.value,children:a.label},a.value))})}),e.jsx(o.Item,{label:"Service Description",required:!0,children:e.jsx(x.TextArea,{rows:4,value:s.description,onChange:a=>{const l=[...S];l[r].description=a.target.value,z(l)},placeholder:"Describe your expertise...",size:"large"})})]},r)),e.jsxs(h,{type:"dashed",onClick:ke,block:!0,size:"large",className:"mb-8",children:[e.jsx(Ge,{className:"mr-2"})," Add Another Service"]}),e.jsx(o.Item,{label:"Languages Spoken",required:!0,children:e.jsx(p,{mode:"multiple",value:$,onChange:Se,size:"large",children:is.map(s=>e.jsx(f,{value:s.value,children:s.label},s.value))})}),e.jsx(o.Item,{label:"Preferred Payment Method",required:!0,children:e.jsx(d,{name:"preferred_method",control:c,rules:{required:"Required"},render:({field:s})=>e.jsx(p,{size:"large",placeholder:"Select method",...s,children:ls.map(r=>e.jsx(f,{value:r.value,children:r.label},r.value))})})}),e.jsxs(o.Item,{children:[e.jsx(d,{name:"agreed_to_terms",control:c,rules:{required:"You must agree"},render:({field:s})=>e.jsxs(Je,{checked:s.value,onChange:r=>s.onChange(r.target.checked),children:["I agree to ",e.jsx("a",{href:"#",className:"text-purple-600",children:"Terms"})," & ",e.jsx("a",{href:"#",className:"text-purple-600",children:"Privacy Policy"})]})}),t.agreed_to_terms&&e.jsx("div",{className:"ant-form-item-explain-error",children:t.agreed_to_terms.message})]}),e.jsxs("div",{className:"flex justify-between mt-12",children:[e.jsxs(h,{size:"large",onClick:K,children:[e.jsx(he,{})," Back"]}),e.jsxs(h,{type:"primary",htmlType:"submit",loading:C.submitting,size:"large",style:{backgroundColor:"#5C039B",borderColor:"#5C039B"},children:["Complete Registration ",e.jsx(E,{className:"ml-2"})]})]})]})]})]})]})})})};export{os as default};
