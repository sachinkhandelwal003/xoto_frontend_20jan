import{c as te,r as o,b5 as we,b6 as Ce,b7 as Ne,b8 as _e,b9 as qe,j as e,ba as Z,bb as ke,bc as P,bd as ze,be as n,bf as d,bg as p,bh as Pe,bi as Ie,bj as u,bk as Re,bl as ee,bm as y,n as se,C as re,bn as Me,bo as Le,bp as Fe,bq as $e,br as I,bs as f}from"./index-Ddpuntgg.js";/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Ee=te("trash-2",Be);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]],Ae=te("wrench",Te),ae="/assets/registergarden-QSJN-uo0.jpg",{Option:g}=u,{Title:Oe}=Le,De=Array.from({length:11},(m,x)=>({value:x,label:x===0?"Less than 1 year":`${x} year${x>1?"s":""}`})).concat({value:15,label:"15 years"},{value:20,label:"20+ years"}),Ve=[{value:"Cash",label:"Cash"},{value:"Bank Transfer",label:"Bank Transfer"}],We=[{value:"english",label:"English"},{value:"arabic",label:"Arabic"},{value:"hindi",label:"Hindi"},{value:"french",label:"French"}],Ge=()=>{var O,D,V,W,Y,G,H,J,Q,U;const[m,x]=o.useState(0),[N,w]=o.useState({subcategories:!0,types:{},submitting:!1}),[le,ie]=o.useState(!1),[R,ne]=o.useState("+971"),[M,oe]=o.useState(""),ce=o.useMemo(()=>we.getAll(),[]),{control:c,handleSubmit:de,setValue:v,trigger:ue,watch:L,register:F,formState:{errors:t}}=Ce({mode:"onChange"});o.useEffect(()=>{F("mobile_number",{required:"Mobile number is required",minLength:{value:7,message:"Number is too short"}})},[F]);const h=L("country"),S=L("state"),$=o.useMemo(()=>Ne.getAllCountries(),[]),B=o.useMemo(()=>h?_e.getStatesOfCountry(h):[],[h]),me=o.useMemo(()=>!h||!S?[]:qe.getCitiesOfState(h,S),[h,S]);o.useEffect(()=>{v("state",null),v("city",null)},[h,v]),o.useEffect(()=>{v("city",null)},[S,v]);const[b,C]=o.useState([{subcategoryId:"",types:[],description:"",unit:"per job"}]),[q,he]=o.useState([]),[E,ge]=o.useState([]),[pe,xe]=o.useState({});o.useEffect(()=>{(async()=>{try{const r=await I.get("/estimate/master/category/name/Landscaping/subcategories");r.success&&ge(r.data||[])}catch{f.error("Error loading services")}finally{w(r=>({...r,subcategories:!1}))}})()},[]);const be=async(s,r)=>{if(!s)return;const a=E.find(l=>l._id===s);if(a!=null&&a.category){w(l=>({...l,types:{...l.types,[r]:!0}}));try{const l=await I.get(`/estimate/master/category/${a.category}/subcategories/${s}/types`);if(l.success){const k=(l.data||[]).map(j=>({value:j._id,label:j.label}));xe(j=>({...j,[r]:k}))}}catch{f.error("Error loading specializations")}finally{w(l=>({...l,types:{...l.types,[r]:!1}}))}}},je=(s,r)=>{const a=[...b];a[s].subcategoryId=r,a[s].types=[],C(a),be(r,s)},ye=(s,r)=>{const a=[...b];a[s].types=r,C(a)},fe=()=>{C(s=>[...s,{subcategoryId:"",types:[],description:"",unit:"per job"}])},ve=s=>{C(r=>r.filter((a,l)=>l!==s))},T=async()=>{await ue(m===0?["first_name","last_name","email","password","confirmPassword","mobile_number"]:["experience_years","bio","country","state","city"])&&x(a=>a+1)},A=()=>x(s=>s-1),Se=async s=>{var j,K,X;if(s.password!==s.confirmPassword)return f.error("Passwords do not match");if(q.length===0)return f.error("Please select at least one language");if(b.some(i=>!i.subcategoryId||i.types.length===0||!i.description))return f.error("Please complete all service fields");w(i=>({...i,submitting:!0}));const r=((j=$.find(i=>i.isoCode===s.country))==null?void 0:j.name)||s.country,a=((K=B.find(i=>i.isoCode===s.state))==null?void 0:K.name)||s.state,l=s.city,k={email:s.email,password:s.password,confirm_password:s.confirmPassword,name:{first_name:s.first_name,last_name:s.last_name},mobile:{country_code:R,number:M.replace(/\D/g,"")},is_mobile_verified:!0,location:{country:r,state:a,city:l},professional:{experience_years:Number(s.experience_years),bio:s.bio,skills:[],availability:"Full-time"},services_offered:b.map(i=>({category:i.subcategoryId,subcategories:i.types,description:i.description,unit:i.unit})),payment:{preferred_method:s.preferred_method},languages:q,meta:{agreed_to_terms:!0}};try{await I.post("/freelancer",k),ie(!0),f.success("Registration successful!")}catch(i){const z=(X=i.response)==null?void 0:X.data;f.error((z==null?void 0:z.message)||"Registration failed")}finally{w(i=>({...i,submitting:!1}))}},_=(s,r)=>((r==null?void 0:r.label)??"").toLowerCase().includes(s.toLowerCase());return le?e.jsx("div",{className:"min-h-screen bg-cover bg-center flex items-center justify-center p-6",style:{backgroundImage:`linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.7)), url(${ae})`},children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-10 max-w-md w-full text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(Z,{className:"w-12 h-12 text-purple-600"})}),e.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Registration Successful!"}),e.jsxs("p",{className:"text-gray-600 mb-8",children:["Your request has been sent to the ",e.jsx("strong",{children:"Super-Admin"}),"."]}),e.jsxs("a",{href:"/login",className:"inline-flex items-center gap-2 bg-purple-600 text-white px-8 py-3 rounded-lg font-medium hover:bg-purple-700 transition",children:["Go to Login ",e.jsx(ke,{className:"w-5 h-5"})]})]})}):e.jsx("div",{className:"min-h-screen bg-cover bg-center flex items-center justify-center p-6",style:{backgroundImage:`linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.6)), url(${ae})`},children:e.jsx("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-6xl overflow-hidden",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4",children:[e.jsxs("div",{className:"bg-gradient-to-b from-purple-700 to-purple-900 text-white p-8",children:[e.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Join as a Pro"}),e.jsx("p",{className:"text-purple-200 mb-8",children:"Grow your landscaping business"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:`flex items-center gap-3 ${m>=0?"text-white":"text-purple-300"}`,children:[e.jsx(P,{className:"w-6 h-6"})," Basic Info"]}),e.jsxs("div",{className:`flex items-center gap-3 ${m>=1?"text-white":"text-purple-300"}`,children:[e.jsx(ze,{className:"w-6 h-6"})," Professional"]}),e.jsxs("div",{className:`flex items-center gap-3 ${m>=2?"text-white":"text-purple-300"}`,children:[e.jsx(Ae,{className:"w-6 h-6"})," Services"]})]})]}),e.jsxs("div",{className:"lg:col-span-3 p-10",children:[e.jsx("h2",{className:"text-4xl font-bold text-gray-800 mb-2",children:"Execution Partners Registration"}),e.jsxs("p",{className:"text-gray-600 mb-8",children:["Step ",m+1," of 3"]}),e.jsxs(n,{layout:"vertical",onFinish:de(Se),children:[m===0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(n.Item,{label:"First Name",required:!0,validateStatus:t.first_name?"error":"",help:(O=t.first_name)==null?void 0:O.message,children:e.jsx(d,{name:"first_name",control:c,rules:{required:"Required"},render:({field:s})=>e.jsx(p,{prefix:e.jsx(P,{}),size:"large",...s})})}),e.jsx(n.Item,{label:"Last Name",required:!0,validateStatus:t.last_name?"error":"",help:(D=t.last_name)==null?void 0:D.message,children:e.jsx(d,{name:"last_name",control:c,rules:{required:"Required"},render:({field:s})=>e.jsx(p,{prefix:e.jsx(P,{}),size:"large",...s})})})]}),e.jsx(n.Item,{label:"Email",required:!0,validateStatus:t.email?"error":"",help:(V=t.email)==null?void 0:V.message,children:e.jsx(d,{name:"email",control:c,rules:{required:"Required",pattern:{value:/^\S+@\S+$/i,message:"Invalid email"}},render:({field:s})=>e.jsx(p,{prefix:e.jsx(Pe,{}),size:"large",...s})})}),e.jsx(n.Item,{label:"Mobile Number",required:!0,validateStatus:t.mobile_number?"error":"",help:(W=t.mobile_number)==null?void 0:W.message,children:e.jsxs(Ie.Compact,{style:{width:"100%"},children:[e.jsx(u,{showSearch:!0,value:R,onChange:ne,style:{width:"30%",minWidth:"120px"},placeholder:"Code",size:"large",optionFilterProp:"label",filterOption:_,children:ce.map((s,r)=>e.jsx(g,{value:s.dial_code,label:`${s.name} ${s.dial_code}`,children:e.jsxs("span",{children:[s.flag," ",s.dial_code]})},`${s.code}-${r}`))}),e.jsx(p,{prefix:e.jsx(Re,{size:16}),value:M,onChange:s=>{const r=s.target.value.replace(/\D/g,"");oe(r),v("mobile_number",r,{shouldValidate:!0})},placeholder:"501234567",size:"large",style:{width:"70%"}})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(n.Item,{label:"Password",required:!0,validateStatus:t.password?"error":"",help:(Y=t.password)==null?void 0:Y.message,children:e.jsx(d,{name:"password",control:c,rules:{required:"Required",minLength:{value:6,message:"Min 6 characters"}},render:({field:s})=>e.jsx(p.Password,{prefix:e.jsx(ee,{}),size:"large",...s})})}),e.jsx(n.Item,{label:"Confirm Password",required:!0,children:e.jsx(d,{name:"confirmPassword",control:c,rules:{required:"Required"},render:({field:s})=>e.jsx(p.Password,{prefix:e.jsx(ee,{}),size:"large",...s})})})]}),e.jsx("div",{className:"text-right mt-8",children:e.jsxs(y,{type:"primary",size:"large",onClick:T,style:{backgroundColor:"#5C039B",borderColor:"#5C039B"},children:["Next ",e.jsx(se,{className:"inline"})]})})]}),m===1&&e.jsxs(e.Fragment,{children:[e.jsx(n.Item,{label:"Years of Experience",required:!0,validateStatus:t.experience_years?"error":"",help:(G=t.experience_years)==null?void 0:G.message,children:e.jsx(d,{name:"experience_years",control:c,rules:{required:"Required"},render:({field:s})=>e.jsx(u,{size:"large",placeholder:"Select years",...s,children:De.map(r=>e.jsx(g,{value:r.value,children:r.label},r.value))})})}),e.jsx(n.Item,{label:"Professional Bio",required:!0,validateStatus:t.bio?"error":"",help:(H=t.bio)==null?void 0:H.message,children:e.jsx(d,{name:"bio",control:c,rules:{required:"Required",minLength:{value:10,message:"Min 10 chars"}},render:({field:s})=>e.jsx(p.TextArea,{rows:5,size:"large",...s})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(n.Item,{label:"Country",required:!0,validateStatus:t.country?"error":"",help:(J=t.country)==null?void 0:J.message,children:e.jsx(d,{name:"country",control:c,rules:{required:"Required"},render:({field:s})=>e.jsx(u,{...s,size:"large",placeholder:"Select country",showSearch:!0,optionFilterProp:"label",filterOption:_,children:$.map(r=>e.jsxs(g,{value:r.isoCode,label:r.name,children:[r.flag," ",r.name]},r.isoCode))})})}),e.jsx(n.Item,{label:"State/Emirate",required:!0,validateStatus:t.state?"error":"",help:(Q=t.state)==null?void 0:Q.message,children:e.jsx(d,{name:"state",control:c,rules:{required:"Required"},render:({field:s})=>e.jsx(u,{...s,size:"large",placeholder:h?"Select State":"Select Country first",disabled:!h,showSearch:!0,optionFilterProp:"label",filterOption:_,children:B.map(r=>e.jsx(g,{value:r.isoCode,label:r.name,children:r.name},r.isoCode))})})}),e.jsx(n.Item,{label:"City",required:!0,validateStatus:t.city?"error":"",help:(U=t.city)==null?void 0:U.message,children:e.jsx(d,{name:"city",control:c,rules:{required:"Required"},render:({field:s})=>e.jsx(u,{...s,size:"large",placeholder:S?"Select City":"Select State first",disabled:!S,showSearch:!0,optionFilterProp:"label",filterOption:_,children:me.map(r=>e.jsx(g,{value:r.name,label:r.name,children:r.name},r.name))})})})]}),e.jsxs("div",{className:"flex justify-between mt-8",children:[e.jsxs(y,{size:"large",onClick:A,children:[e.jsx(re,{})," Back"]}),e.jsxs(y,{type:"primary",size:"large",onClick:T,style:{backgroundColor:"#5C039B",borderColor:"#5C039B"},children:["Next ",e.jsx(se,{})]})]})]}),m===2&&e.jsxs(Me,{spinning:N.submitting,children:[b.map((s,r)=>e.jsxs("div",{className:"border border-gray-200 rounded-2xl p-8 mb-10 relative bg-gray-50",children:[b.length>1&&e.jsx(y,{danger:!0,onClick:()=>ve(r),className:"absolute top-6 right-6",children:e.jsx(Ee,{className:"w-5 h-5"})}),e.jsxs(Oe,{level:3,className:"mb-8",children:["Service ",r+1]}),e.jsx(n.Item,{label:"What service do you offer?",required:!0,children:e.jsx(u,{size:"large",placeholder:"Select a service category",value:s.subcategoryId||void 0,onChange:a=>je(r,a),loading:N.subcategories,showSearch:!0,optionFilterProp:"children",className:"w-full",children:E.map(a=>e.jsx(g,{value:a._id,children:a.label},a._id))})}),s.subcategoryId&&e.jsx(n.Item,{label:"Specializations (Multiple)",required:!0,className:"mb-6",children:e.jsx(u,{mode:"multiple",loading:N.types[r],value:s.types,onChange:a=>ye(r,a),placeholder:"Select your specializations",size:"large",children:(pe[r]||[]).map(a=>e.jsx(g,{value:a.value,children:a.label},a.value))})}),e.jsx(n.Item,{label:"Service Description",required:!0,children:e.jsx(p.TextArea,{rows:4,value:s.description,onChange:a=>{const l=[...b];l[r].description=a.target.value,C(l)},placeholder:"Describe your expertise...",size:"large"})})]},r)),e.jsxs(y,{type:"dashed",onClick:fe,block:!0,size:"large",className:"mb-8",children:[e.jsx(Fe,{className:"mr-2"})," Add Another Service"]}),e.jsx(n.Item,{label:"Languages Spoken",required:!0,children:e.jsx(u,{mode:"multiple",value:q,onChange:he,size:"large",children:We.map(s=>e.jsx(g,{value:s.value,children:s.label},s.value))})}),e.jsx(n.Item,{label:"Preferred Payment Method",required:!0,children:e.jsx(d,{name:"preferred_method",control:c,rules:{required:"Required"},render:({field:s})=>e.jsx(u,{size:"large",placeholder:"Select method",...s,children:Ve.map(r=>e.jsx(g,{value:r.value,children:r.label},r.value))})})}),e.jsxs(n.Item,{children:[e.jsx(d,{name:"agreed_to_terms",control:c,rules:{required:"You must agree"},render:({field:s})=>e.jsxs($e,{checked:s.value,onChange:r=>s.onChange(r.target.checked),children:["I agree to ",e.jsx("a",{href:"#",className:"text-purple-600",children:"Terms"})," & ",e.jsx("a",{href:"#",className:"text-purple-600",children:"Privacy Policy"})]})}),t.agreed_to_terms&&e.jsx("div",{className:"ant-form-item-explain-error",children:t.agreed_to_terms.message})]}),e.jsxs("div",{className:"flex justify-between mt-12",children:[e.jsxs(y,{size:"large",onClick:A,children:[e.jsx(re,{})," Back"]}),e.jsxs(y,{type:"primary",htmlType:"submit",loading:N.submitting,size:"large",style:{backgroundColor:"#5C039B",borderColor:"#5C039B"},children:["Complete Registration ",e.jsx(Z,{className:"ml-2"})]})]})]})]})]})]})})})};export{Ge as default};
