import{c as he,r as l,b5 as Te,b6 as Oe,b7 as Be,b8 as Ee,b9 as Le,j as e,ba as E,bb as $e,bc as L,bd as Fe,be as o,bf as d,bg as y,bh as Ae,bi as ne,bj as p,bk as De,bl as h,bm as We,bn as oe,n as ce,C as de,bo as Ye,bp as Ge,bq as He,br as Je,bs as Qe,bt as P,bu as u}from"./index-B5o2etcJ.js";/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Ke=he("trash-2",Ue);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]],Ze=he("wrench",Xe),ue="/assets/registergarden-QSJN-uo0.jpg",{Option:f}=p,{Title:me,Text:es}=Ge,ss=Array.from({length:11},(m,j)=>({value:j,label:j===0?"Less than 1 year":`${j} year${j>1?"s":""}`})).concat({value:15,label:"15 years"},{value:20,label:"20+ years"}),rs=[{value:"Cash",label:"Cash"},{value:"Bank Transfer",label:"Bank Transfer"}],as=[{value:"english",label:"English"},{value:"arabic",label:"Arabic"},{value:"hindi",label:"Hindi"},{value:"french",label:"French"}],ls=()=>{var Q,U,K,X,Z,ee,se,re,ae,te,le;const[m,j]=l.useState(0),[v,g]=l.useState({subcategories:!0,types:{},submitting:!1,otpSending:!1,otpVerifying:!1}),[pe,ge]=l.useState(!1),[C,be]=l.useState("+971"),[b,xe]=l.useState(""),ye=l.useMemo(()=>Te.getAll(),[]),[_,fe]=l.useState(!1),[je,R]=l.useState(!1),[z,ve]=l.useState(""),{control:c,handleSubmit:Se,setValue:N,trigger:$,watch:F,register:A,setError:T,clearErrors:I,formState:{errors:t}}=Oe({mode:"onChange"});l.useEffect(()=>{A("mobile_number",{required:"Mobile number is required",minLength:{value:7,message:"Number is too short"}})},[A]);const x=F("country"),q=F("state"),D=l.useMemo(()=>Be.getAllCountries(),[]),W=l.useMemo(()=>x?Ee.getStatesOfCountry(x):[],[x]),we=l.useMemo(()=>x&&q?Le.getCitiesOfState(x,q):[],[x,q]);l.useEffect(()=>{N("state",null),N("city",null)},[x,N]),l.useEffect(()=>{N("city",null)},[q,N]);const[S,k]=l.useState([{subcategoryId:"",types:[],description:"",unit:"per job"}]),[O,Ce]=l.useState([]),[Y,_e]=l.useState([]),[Ne,qe]=l.useState({});l.useEffect(()=>{(async()=>{try{const r=await P.get("/estimate/master/category/name/Landscaping/subcategories");r.success&&_e(r.data||[])}catch{u.error("Error loading services")}finally{g(r=>({...r,subcategories:!1}))}})()},[]);const ke=async(s,r)=>{if(!s)return;const a=Y.find(i=>i._id===s);if(a!=null&&a.category){g(i=>({...i,types:{...i.types,[r]:!0}}));try{const i=await P.get(`/estimate/master/category/${a.category}/subcategories/${s}/types`);if(i.success){const V=(i.data||[]).map(w=>({value:w._id,label:w.label}));qe(w=>({...w,[r]:V}))}}catch{u.error("Error loading specializations")}finally{g(i=>({...i,types:{...i.types,[r]:!1}}))}}},Pe=(s,r)=>{const a=[...S];a[s].subcategoryId=r,a[s].types=[],k(a),ke(r,s)},ze=(s,r)=>{const a=[...S];a[s].types=r,k(a)},Ie=()=>k(s=>[...s,{subcategoryId:"",types:[],description:"",unit:"per job"}]),Me=s=>k(r=>r.filter((a,i)=>i!==s)),G=async()=>{var s,r;if(!b||b.length<7){T("mobile_number",{type:"manual",message:"Enter a valid number to verify"});return}g(a=>({...a,otpSending:!0}));try{await P.post("/otp/send-otp",{country_code:C,phone_number:b}),u.success(`OTP sent to ${C} ${b}`),R(!0),I("mobile_number")}catch(a){u.error(((r=(s=a.response)==null?void 0:s.data)==null?void 0:r.message)||"Failed to send OTP")}finally{g(a=>({...a,otpSending:!1}))}},Ve=async()=>{var s,r;if(!z||z.length<4)return u.error("Please enter a valid OTP");g(a=>({...a,otpVerifying:!0}));try{await P.post("/otp/verify-otp",{country_code:C,phone_number:b,otp:z}),u.success("Mobile number verified successfully!"),fe(!0),R(!1),I("mobile_number")}catch(a){u.error(((r=(s=a.response)==null?void 0:s.data)==null?void 0:r.message)||"Invalid OTP. Please try again.")}finally{g(a=>({...a,otpVerifying:!1}))}},H=async()=>{let s=!0;if(m===0){const a=await $(["first_name","last_name","email","password","confirmPassword","mobile_number"]);_?a&&I("mobile_number"):(T("mobile_number",{type:"manual",message:"Please verify your mobile number first"}),s=!1),a||(s=!1)}else m===1&&(await $(["experience_years","bio","country","state","city"])||(s=!1));s&&j(r=>r+1)},J=()=>j(s=>s-1),Re=async s=>{var V,w,ie;if(s.password!==s.confirmPassword){T("confirmPassword",{type:"manual",message:"Passwords do not match"});return}if(O.length===0)return u.error("Please select at least one language");if(S.some(n=>!n.subcategoryId||n.types.length===0||!n.description))return u.error("Please complete all service fields");g(n=>({...n,submitting:!0}));const r=((V=D.find(n=>n.isoCode===s.country))==null?void 0:V.name)||s.country,a=((w=W.find(n=>n.isoCode===s.state))==null?void 0:w.name)||s.state,i={email:s.email,password:s.password,confirm_password:s.confirmPassword,name:{first_name:s.first_name,last_name:s.last_name},mobile:{country_code:C,number:b.replace(/\D/g,"")},is_mobile_verified:_,location:{country:r,state:a,city:s.city},professional:{experience_years:Number(s.experience_years),bio:s.bio,skills:[],availability:"Full-time"},services_offered:S.map(n=>({category:n.subcategoryId,subcategories:n.types,description:n.description,unit:n.unit})),payment:{preferred_method:s.preferred_method},languages:O,meta:{agreed_to_terms:!0}};try{await P.post("/freelancer",i),ge(!0),u.success("Registration successful!")}catch(n){const B=(ie=n.response)==null?void 0:ie.data;u.error((B==null?void 0:B.message)||"Registration failed")}finally{g(n=>({...n,submitting:!1}))}},M=(s,r)=>((r==null?void 0:r.label)??"").toLowerCase().includes(s.toLowerCase());return pe?e.jsx("div",{className:"min-h-screen bg-cover bg-center flex items-center justify-center p-6",style:{backgroundImage:`linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.7)), url(${ue})`},children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-10 max-w-md w-full text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(E,{className:"w-12 h-12 text-purple-600"})}),e.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Registration Successful!"}),e.jsxs("p",{className:"text-gray-600 mb-8",children:["Your request has been sent to the ",e.jsx("strong",{children:"Super-Admin"}),"."]}),e.jsxs("a",{href:"/login",className:"inline-flex items-center gap-2 bg-purple-600 text-white px-8 py-3 rounded-lg font-medium hover:bg-purple-700 transition",children:["Go to Login ",e.jsx($e,{className:"w-5 h-5"})]})]})}):e.jsxs("div",{className:"min-h-screen bg-cover bg-center flex items-center justify-center p-6",style:{backgroundImage:`linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.6)), url(${ue})`},children:[e.jsx("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-6xl overflow-hidden",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4",children:[e.jsxs("div",{className:"bg-gradient-to-b from-purple-700 to-purple-900 text-white p-8",children:[e.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Join as a Pro"}),e.jsx("p",{className:"text-purple-200 mb-8",children:"Grow your landscaping business"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:`flex items-center gap-3 ${m>=0?"text-white":"text-purple-300"}`,children:[e.jsx(L,{className:"w-6 h-6"})," Basic Info"]}),e.jsxs("div",{className:`flex items-center gap-3 ${m>=1?"text-white":"text-purple-300"}`,children:[e.jsx(Fe,{className:"w-6 h-6"})," Professional"]}),e.jsxs("div",{className:`flex items-center gap-3 ${m>=2?"text-white":"text-purple-300"}`,children:[e.jsx(Ze,{className:"w-6 h-6"})," Services"]})]})]}),e.jsxs("div",{className:"lg:col-span-3 p-10",children:[e.jsx("h2",{className:"text-4xl font-bold text-gray-800 mb-2",children:"Execution Partners Registration"}),e.jsxs("p",{className:"text-gray-600 mb-8",children:["Step ",m+1," of 3"]}),e.jsxs(o,{layout:"vertical",onFinish:Se(Re),children:[m===0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(o.Item,{label:"First Name",required:!0,validateStatus:t.first_name?"error":"",help:(Q=t.first_name)==null?void 0:Q.message,children:e.jsx(d,{name:"first_name",control:c,rules:{required:"Required"},render:({field:s})=>e.jsx(y,{prefix:e.jsx(L,{}),size:"large",...s})})}),e.jsx(o.Item,{label:"Last Name",required:!0,validateStatus:t.last_name?"error":"",help:(U=t.last_name)==null?void 0:U.message,children:e.jsx(d,{name:"last_name",control:c,rules:{required:"Required"},render:({field:s})=>e.jsx(y,{prefix:e.jsx(L,{}),size:"large",...s})})})]}),e.jsx(o.Item,{label:"Email",required:!0,validateStatus:t.email?"error":"",help:(K=t.email)==null?void 0:K.message,children:e.jsx(d,{name:"email",control:c,rules:{required:"Required",pattern:{value:/^\S+@\S+$/i,message:"Invalid email"}},render:({field:s})=>e.jsx(y,{prefix:e.jsx(Ae,{}),size:"large",...s})})}),e.jsx(o.Item,{label:e.jsxs(ne,{children:[e.jsx("span",{children:"Mobile Number"}),_&&e.jsx(We,{color:"success",icon:e.jsx(E,{size:12}),children:"Verified"})]}),required:!0,validateStatus:t.mobile_number?"error":"",help:(X=t.mobile_number)==null?void 0:X.message,children:e.jsxs(ne.Compact,{style:{width:"100%"},children:[e.jsx(p,{showSearch:!0,value:C,onChange:be,style:{width:"30%",minWidth:"110px"},placeholder:"Code",size:"large",optionFilterProp:"label",filterOption:M,children:ye.map((s,r)=>e.jsx(f,{value:s.dial_code,label:`${s.name} ${s.dial_code}`,children:e.jsxs("span",{children:[s.flag," ",s.dial_code]})},`${s.code}-${r}`))}),e.jsx(y,{prefix:e.jsx(De,{size:16}),value:b,onChange:s=>{var a;const r=s.target.value.replace(/\D/g,"");xe(r),N("mobile_number",r,{shouldValidate:!0}),((a=t.mobile_number)==null?void 0:a.type)==="manual"&&I("mobile_number")},placeholder:"501234567",size:"large",style:{width:"50%"}}),e.jsx(h,{type:"primary",size:"large",onClick:G,disabled:_||!b,loading:v.otpSending,style:{width:"20%",minWidth:"100px",backgroundColor:_?"#52c41a":void 0},children:_?"Verified":"Verify"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(o.Item,{label:"Password",required:!0,validateStatus:t.password?"error":"",help:(Z=t.password)==null?void 0:Z.message,children:e.jsx(d,{name:"password",control:c,rules:{required:"Required",minLength:{value:6,message:"Min 6 characters"}},render:({field:s})=>e.jsx(y.Password,{prefix:e.jsx(oe,{}),size:"large",...s})})}),e.jsx(o.Item,{label:"Confirm Password",required:!0,validateStatus:t.confirmPassword?"error":"",help:(ee=t.confirmPassword)==null?void 0:ee.message,children:e.jsx(d,{name:"confirmPassword",control:c,rules:{required:"Required"},render:({field:s})=>e.jsx(y.Password,{prefix:e.jsx(oe,{}),size:"large",...s})})})]}),e.jsx("div",{className:"text-right mt-8",children:e.jsxs(h,{type:"primary",size:"large",onClick:H,style:{backgroundColor:"#5C039B",borderColor:"#5C039B"},children:["Next ",e.jsx(ce,{className:"inline"})]})})]}),m===1&&e.jsxs(e.Fragment,{children:[e.jsx(o.Item,{label:"Years of Experience",required:!0,validateStatus:t.experience_years?"error":"",help:(se=t.experience_years)==null?void 0:se.message,children:e.jsx(d,{name:"experience_years",control:c,rules:{required:"Required"},render:({field:s})=>e.jsx(p,{size:"large",placeholder:"Select years",...s,children:ss.map(r=>e.jsx(f,{value:r.value,children:r.label},r.value))})})}),e.jsx(o.Item,{label:"Professional Bio",required:!0,validateStatus:t.bio?"error":"",help:(re=t.bio)==null?void 0:re.message,children:e.jsx(d,{name:"bio",control:c,rules:{required:"Required",minLength:{value:10,message:"Min 10 chars"}},render:({field:s})=>e.jsx(y.TextArea,{rows:5,size:"large",...s})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(o.Item,{label:"Country",required:!0,validateStatus:t.country?"error":"",help:(ae=t.country)==null?void 0:ae.message,children:e.jsx(d,{name:"country",control:c,rules:{required:"Required"},render:({field:s})=>e.jsx(p,{...s,size:"large",placeholder:"Select country",showSearch:!0,optionFilterProp:"label",filterOption:M,children:D.map(r=>e.jsxs(f,{value:r.isoCode,label:r.name,children:[r.flag," ",r.name]},r.isoCode))})})}),e.jsx(o.Item,{label:"State/Emirate",required:!0,validateStatus:t.state?"error":"",help:(te=t.state)==null?void 0:te.message,children:e.jsx(d,{name:"state",control:c,rules:{required:"Required"},render:({field:s})=>e.jsx(p,{...s,size:"large",placeholder:x?"Select State":"Select Country first",disabled:!x,showSearch:!0,optionFilterProp:"label",filterOption:M,children:W.map(r=>e.jsx(f,{value:r.isoCode,label:r.name,children:r.name},r.isoCode))})})}),e.jsx(o.Item,{label:"City",required:!0,validateStatus:t.city?"error":"",help:(le=t.city)==null?void 0:le.message,children:e.jsx(d,{name:"city",control:c,rules:{required:"Required"},render:({field:s})=>e.jsx(p,{...s,size:"large",placeholder:q?"Select City":"Select State first",disabled:!q,showSearch:!0,optionFilterProp:"label",filterOption:M,children:we.map(r=>e.jsx(f,{value:r.name,label:r.name,children:r.name},r.name))})})})]}),e.jsxs("div",{className:"flex justify-between mt-8",children:[e.jsxs(h,{size:"large",onClick:J,children:[e.jsx(de,{})," Back"]}),e.jsxs(h,{type:"primary",size:"large",onClick:H,style:{backgroundColor:"#5C039B",borderColor:"#5C039B"},children:["Next ",e.jsx(ce,{})]})]})]}),m===2&&e.jsxs(Ye,{spinning:v.submitting,children:[S.map((s,r)=>e.jsxs("div",{className:"border border-gray-200 rounded-2xl p-8 mb-10 relative bg-gray-50",children:[S.length>1&&e.jsx(h,{danger:!0,onClick:()=>Me(r),className:"absolute top-6 right-6",children:e.jsx(Ke,{className:"w-5 h-5"})}),e.jsxs(me,{level:3,className:"mb-8",children:["Service ",r+1]}),e.jsx(o.Item,{label:"What service do you offer?",required:!0,children:e.jsx(p,{size:"large",placeholder:"Select a service category",value:s.subcategoryId||void 0,onChange:a=>Pe(r,a),loading:v.subcategories,showSearch:!0,optionFilterProp:"children",className:"w-full",children:Y.map(a=>e.jsx(f,{value:a._id,children:a.label},a._id))})}),s.subcategoryId&&e.jsx(o.Item,{label:"Specializations (Multiple)",required:!0,className:"mb-6",children:e.jsx(p,{mode:"multiple",loading:v.types[r],value:s.types,onChange:a=>ze(r,a),placeholder:"Select your specializations",size:"large",children:(Ne[r]||[]).map(a=>e.jsx(f,{value:a.value,children:a.label},a.value))})}),e.jsx(o.Item,{label:"Service Description",required:!0,children:e.jsx(y.TextArea,{rows:4,value:s.description,onChange:a=>{const i=[...S];i[r].description=a.target.value,k(i)},placeholder:"Describe your expertise...",size:"large"})})]},r)),e.jsxs(h,{type:"dashed",onClick:Ie,block:!0,size:"large",className:"mb-8",children:[e.jsx(He,{className:"mr-2"})," Add Another Service"]}),e.jsx(o.Item,{label:"Languages Spoken",required:!0,children:e.jsx(p,{mode:"multiple",value:O,onChange:Ce,size:"large",children:as.map(s=>e.jsx(f,{value:s.value,children:s.label},s.value))})}),e.jsx(o.Item,{label:"Preferred Payment Method",required:!0,children:e.jsx(d,{name:"preferred_method",control:c,rules:{required:"Required"},render:({field:s})=>e.jsx(p,{size:"large",placeholder:"Select method",...s,children:rs.map(r=>e.jsx(f,{value:r.value,children:r.label},r.value))})})}),e.jsxs(o.Item,{children:[e.jsx(d,{name:"agreed_to_terms",control:c,rules:{required:"You must agree"},render:({field:s})=>e.jsxs(Je,{checked:s.value,onChange:r=>s.onChange(r.target.checked),children:["I agree to ",e.jsx("a",{href:"#",className:"text-purple-600",children:"Terms"})," & ",e.jsx("a",{href:"#",className:"text-purple-600",children:"Privacy Policy"})]})}),t.agreed_to_terms&&e.jsx("div",{className:"ant-form-item-explain-error",children:t.agreed_to_terms.message})]}),e.jsxs("div",{className:"flex justify-between mt-12",children:[e.jsxs(h,{size:"large",onClick:J,children:[e.jsx(de,{})," Back"]}),e.jsxs(h,{type:"primary",htmlType:"submit",loading:v.submitting,size:"large",style:{backgroundColor:"#5C039B",borderColor:"#5C039B"},children:["Complete Registration ",e.jsx(E,{className:"ml-2"})]})]})]})]})]})]})}),e.jsx(Qe,{title:e.jsx(me,{level:4,style:{margin:0},children:"Verify Mobile Number"}),open:je,onCancel:()=>R(!1),footer:null,width:400,centered:!0,children:e.jsxs("div",{className:"text-center py-4",children:[e.jsxs(es,{className:"block mb-6 text-gray-500",children:["Enter the 6-digit code sent to ",e.jsx("br",{}),e.jsxs("strong",{children:[C," ",b]})]}),e.jsx(y.OTP,{length:6,value:z,onChange:ve,size:"large",style:{marginBottom:24}}),e.jsx(h,{type:"primary",block:!0,size:"large",loading:v.otpVerifying,onClick:Ve,style:{backgroundColor:"#5C039B",borderColor:"#5C039B"},children:"Verify OTP"}),e.jsx(h,{type:"link",className:"mt-4 text-gray-400",onClick:G,disabled:v.otpSending,children:"Resend OTP"})]})})]})};export{ls as default};
