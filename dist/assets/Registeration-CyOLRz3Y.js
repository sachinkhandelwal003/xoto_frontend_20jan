import{c as X,r as c,b5 as je,j as e,b6 as Y,b7 as ye,b8 as A,b9 as fe,ba as n,bb as u,bc as b,bd as ve,be as m,bf as Se,bg as V,bh as f,n as G,C as W,bi as we,bj as Ne,bk as Ce,bl as _e,bm as z,bn as p}from"./index-CcIQXmhH.js";/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],ke=X("trash-2",qe);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]],ze=X("wrench",Ae),Z="/assets/registergarden-QSJN-uo0.jpg",{Option:x}=m,{Title:Ie,Text:Te}=Ne,Pe=[{value:"+91",label:"+91 India"},{value:"+971",label:"+971 UAE"},{value:"+966",label:"+966 Saudi Arabia"},{value:"+1",label:"+1 USA/Canada"}],Re=Array.from({length:11},(h,j)=>({value:j,label:j===0?"Less than 1 year":`${j} year${j>1?"s":""}`})).concat({value:15,label:"15 years"},{value:20,label:"20+ years"}),Me=[{value:"Cash",label:"Cash"},{value:"Bank Transfer",label:"Bank Transfer"}],Ee=[{value:"english",label:"English"},{value:"arabic",label:"Arabic"},{value:"hindi",label:"Hindi"},{value:"french",label:"French"}],v={UAE:{states:["Abu Dhabi","Dubai","Sharjah","Ajman","Ras Al Khaimah","Fujairah","Umm Al Quwain"],cities:{"Abu Dhabi":["Abu Dhabi City","Al Ain","Madinat Zayed"],Dubai:["Dubai","Jebel Ali","Hatta"],Sharjah:["Sharjah","Khor Fakkan","Kalba"],Ajman:["Ajman"],"Ras Al Khaimah":["Ras Al Khaimah City","Al Jazirah Al Hamra"],Fujairah:["Fujairah City","Dibba Al-Fujairah"],"Umm Al Quwain":["Umm Al Quwain"]}},India:{states:["Delhi","Maharashtra","Karnataka","Tamil Nadu"],cities:{Delhi:["New Delhi","Dwarka"],Maharashtra:["Mumbai","Pune"],Karnataka:["Bangalore","Mysore"],"Tamil Nadu":["Chennai","Coimbatore"]}}},Le=()=>{var B,T,L,$,U,K,O,H,J,Q;const[h,j]=c.useState(0),[_,S]=c.useState({subcategories:!0,types:{},submitting:!1}),[ee,se]=c.useState(!1),[I,ae]=c.useState("+971"),[P,re]=c.useState(""),[y,w]=c.useState([{subcategoryId:"",types:[],description:"",unit:"per job"}]),[q,te]=c.useState([]),[Fe,De]=c.useState({}),[R,le]=c.useState([]),[ie,M]=c.useState({}),[ne,ce]=c.useState(((B=v.UAE)==null?void 0:B.states)||[]),[oe,k]=c.useState([]),{control:d,handleSubmit:de,setValue:N,trigger:ue,watch:E,formState:{errors:i}}=je({mode:"onChange"}),g=E("country","UAE"),C=E("state");c.useEffect(()=>{g&&v[g]&&(ce(v[g].states),N("state",""),N("city",""),k([]))},[g,N]),c.useEffect(()=>{var s;g&&C&&((s=v[g])!=null&&s.cities[C])?(k(v[g].cities[C]),N("city","")):k([])},[g,C,N]),c.useEffect(()=>{(async()=>{try{const a=await z.get("/estimate/master/category/name/Landscaping/subcategories");a.success&&le(a.data||[])}catch{p.error("Error loading services")}finally{S(a=>({...a,subcategories:!1}))}})()},[]);const me=async(s,a)=>{if(!s)return;const r=R.find(t=>t._id===s);if(r!=null&&r.category){S(t=>({...t,types:{...t.types,[a]:!0}}));try{const t=await z.get(`/estimate/master/category/${r.category}/subcategories/${s}/types`);if(t.success){const l=(t.data||[]).map(o=>({value:o._id,label:o.label}));M(o=>({...o,[a]:l}))}}catch{p.error("Error loading specializations")}finally{S(t=>({...t,types:{...t.types,[a]:!1}}))}}},he=(s,a)=>{const r=[...y];r[s].subcategoryId=a,r[s].types=[],w(r),me(a,s)},ge=(s,a)=>{const r=[...y];r[s].types=a,w(r)},pe=()=>{w(s=>[...s,{subcategoryId:"",types:[],description:"",unit:"per job"}])},xe=s=>{w(a=>a.filter((r,t)=>t!==s)),M(a=>{const r={...a};delete r[s];const t={};return Object.keys(r).forEach(l=>{const o=l>s?l-1:l;t[o]=r[l]}),t})},F=async()=>{await ue(h===0?["first_name","last_name","email","password","confirmPassword"]:["experience_years","bio","country","state","city"])&&j(r=>r+1)},D=()=>j(s=>s-1),be=async s=>{var r,t;if(s.password!==s.confirmPassword)return p.error("Passwords do not match");if(q.length===0)return p.error("Please select at least one language");if(y.some(l=>!l.subcategoryId||l.types.length===0||!l.description))return p.error("Please complete all service fields");if(!s.country||!s.state||!s.city)return p.error("Please select country, state, and city");S(l=>({...l,submitting:!0}));const a={email:s.email,password:s.password,confirm_password:s.confirmPassword,name:{first_name:s.first_name,last_name:s.last_name},mobile:{country_code:I,number:P.replace(/\D/g,"")},is_mobile_verified:!0,location:{country:s.country,state:s.state,city:s.city},professional:{experience_years:Number(s.experience_years),bio:s.bio,skills:[],availability:"Full-time"},services_offered:y.map(l=>({category:l.subcategoryId,subcategories:l.types,description:l.description,unit:l.unit})),payment:{preferred_method:s.preferred_method},languages:q,meta:{agreed_to_terms:!0}};try{await z.post("/freelancer",a),se(!0),p.success("Registration successful! Awaiting admin approval.")}catch(l){const o=(r=l.response)==null?void 0:r.data;(t=o==null?void 0:o.errors)!=null&&t.length?p.error(o.errors[0].message):p.error((o==null?void 0:o.message)||"Registration failed")}finally{S(l=>({...l,submitting:!1}))}};return ee?e.jsx("div",{className:"min-h-screen bg-cover bg-center flex items-center justify-center p-6",style:{backgroundImage:`linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.7)), url(${Z})`},children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-10 max-w-md w-full text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(Y,{className:"w-12 h-12 text-purple-600"})}),e.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Registration Successful!"}),e.jsxs("p",{className:"text-gray-600 mb-8",children:["Your request has been sent to the ",e.jsx("strong",{children:"Super-Admin"}),".",e.jsx("br",{}),"You will receive an email once approved."]}),e.jsxs("a",{href:"/login",className:"inline-flex items-center gap-2 bg-purple-600 text-white px-8 py-3 rounded-lg font-medium hover:bg-purple-700 transition",children:["Go to Login ",e.jsx(ye,{className:"w-5 h-5"})]})]})}):e.jsx("div",{className:"min-h-screen bg-cover bg-center flex items-center justify-center p-6",style:{backgroundImage:`linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.6)), url(${Z})`},children:e.jsx("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-6xl overflow-hidden",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4",children:[e.jsxs("div",{className:"bg-gradient-to-b from-purple-700 to-purple-900 text-white p-8",children:[e.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Join as a Pro"}),e.jsx("p",{className:"text-purple-200 mb-8",children:"Grow your landscaping business"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:`flex items-center gap-3 ${h>=0?"text-white":"text-purple-300"}`,children:[e.jsx(A,{className:"w-6 h-6"})," Basic Info"]}),e.jsxs("div",{className:`flex items-center gap-3 ${h>=1?"text-white":"text-purple-300"}`,children:[e.jsx(fe,{className:"w-6 h-6"})," Professional"]}),e.jsxs("div",{className:`flex items-center gap-3 ${h>=2?"text-white":"text-purple-300"}`,children:[e.jsx(ze,{className:"w-6 h-6"})," Services"]})]})]}),e.jsxs("div",{className:"lg:col-span-3 p-10",children:[e.jsx("h2",{className:"text-4xl font-bold text-gray-800 mb-2",children:"Execution Partners Registration"}),e.jsxs("p",{className:"text-gray-600 mb-8",children:["Step ",h+1," of 3"]}),e.jsxs(n,{layout:"vertical",onFinish:de(be),children:[h===0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(n.Item,{label:"First Name",required:!0,validateStatus:i.first_name?"error":"",help:(T=i.first_name)==null?void 0:T.message,children:e.jsx(u,{name:"first_name",control:d,rules:{required:"Required"},render:({field:s})=>e.jsx(b,{prefix:e.jsx(A,{}),size:"large",...s})})}),e.jsx(n.Item,{label:"Last Name",required:!0,validateStatus:i.last_name?"error":"",help:(L=i.last_name)==null?void 0:L.message,children:e.jsx(u,{name:"last_name",control:d,rules:{required:"Required"},render:({field:s})=>e.jsx(b,{prefix:e.jsx(A,{}),size:"large",...s})})})]}),e.jsx(n.Item,{label:"Email",required:!0,validateStatus:i.email?"error":"",help:($=i.email)==null?void 0:$.message,children:e.jsx(u,{name:"email",control:d,rules:{required:"Required",pattern:{value:/^\S+@\S+$/i,message:"Invalid email"}},render:({field:s})=>e.jsx(b,{prefix:e.jsx(ve,{}),size:"large",...s})})}),e.jsx(n.Item,{label:"Mobile Number",required:!0,children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(m,{value:I,onChange:ae,style:{width:140},size:"large",children:Pe.map(s=>e.jsx(x,{value:s.value,children:s.label},s.value))}),e.jsx(b,{prefix:e.jsx(Se,{}),value:P,onChange:s=>re(s.target.value.replace(/\D/g,"")),placeholder:"501234567",size:"large",style:{flex:1}})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(n.Item,{label:"Password",required:!0,validateStatus:i.password?"error":"",help:(U=i.password)==null?void 0:U.message,children:e.jsx(u,{name:"password",control:d,rules:{required:"Required",minLength:{value:6,message:"Min 6 characters"}},render:({field:s})=>e.jsx(b.Password,{prefix:e.jsx(V,{}),size:"large",...s})})}),e.jsx(n.Item,{label:"Confirm Password",required:!0,children:e.jsx(u,{name:"confirmPassword",control:d,rules:{required:"Required"},render:({field:s})=>e.jsx(b.Password,{prefix:e.jsx(V,{}),size:"large",...s})})})]}),e.jsx("div",{className:"text-right mt-8",children:e.jsxs(f,{type:"primary",size:"large",onClick:F,style:{backgroundColor:"#5C039B",borderColor:"#5C039B"},children:["Next ",e.jsx(G,{className:"inline"})]})})]}),h===1&&e.jsxs(e.Fragment,{children:[e.jsx(n.Item,{label:"Years of Experience",required:!0,validateStatus:i.experience_years?"error":"",help:(K=i.experience_years)==null?void 0:K.message,children:e.jsx(u,{name:"experience_years",control:d,rules:{required:"Required"},render:({field:s})=>e.jsx(m,{size:"large",placeholder:"Select years",...s,children:Re.map(a=>e.jsx(x,{value:a.value,children:a.label},a.value))})})}),e.jsx(n.Item,{label:"Professional Bio",required:!0,validateStatus:i.bio?"error":"",help:(O=i.bio)==null?void 0:O.message,children:e.jsx(u,{name:"bio",control:d,rules:{required:"Required",minLength:{value:10,message:"Min 10 chars"}},render:({field:s})=>e.jsx(b.TextArea,{rows:5,size:"large",...s})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(n.Item,{label:"Country",required:!0,validateStatus:i.country?"error":"",help:(H=i.country)==null?void 0:H.message,children:e.jsx(u,{name:"country",control:d,rules:{required:"Required"},render:({field:s})=>e.jsx(m,{size:"large",placeholder:"Select country",...s,children:Object.keys(v).map(a=>e.jsx(x,{value:a,children:a},a))})})}),e.jsx(n.Item,{label:"State/Emirate",required:!0,validateStatus:i.state?"error":"",help:(J=i.state)==null?void 0:J.message,children:e.jsx(u,{name:"state",control:d,rules:{required:"Required"},render:({field:s})=>e.jsx(m,{size:"large",placeholder:"Select state",...s,disabled:!g,children:ne.map(a=>e.jsx(x,{value:a,children:a},a))})})}),e.jsx(n.Item,{label:"City",required:!0,validateStatus:i.city?"error":"",help:(Q=i.city)==null?void 0:Q.message,children:e.jsx(u,{name:"city",control:d,rules:{required:"Required"},render:({field:s})=>e.jsx(m,{size:"large",placeholder:"Select city",...s,disabled:!C,children:oe.map(a=>e.jsx(x,{value:a,children:a},a))})})})]}),e.jsxs("div",{className:"flex justify-between mt-8",children:[e.jsxs(f,{size:"large",onClick:D,children:[e.jsx(W,{})," Back"]}),e.jsxs(f,{type:"primary",size:"large",onClick:F,style:{backgroundColor:"#5C039B",borderColor:"#5C039B"},children:["Next ",e.jsx(G,{})]})]})]}),h===2&&e.jsxs(we,{spinning:_.submitting,children:[y.map((s,a)=>e.jsxs("div",{className:"border border-gray-200 rounded-2xl p-8 mb-10 relative bg-gray-50",children:[y.length>1&&e.jsx(f,{danger:!0,onClick:()=>xe(a),className:"absolute top-6 right-6",children:e.jsx(ke,{className:"w-5 h-5"})}),e.jsxs(Ie,{level:3,className:"mb-8",children:["Service ",a+1]}),e.jsx(n.Item,{label:"What service do you offer?",required:!0,children:e.jsx(m,{size:"large",placeholder:"Select a service category",value:s.subcategoryId||void 0,onChange:r=>he(a,r),loading:_.subcategories,showSearch:!0,optionFilterProp:"children",className:"w-full",children:R.map(r=>e.jsx(x,{value:r._id,children:r.label},r._id))})}),s.subcategoryId&&e.jsx(e.Fragment,{children:e.jsx(n.Item,{label:"Specializations (Multiple)",required:!0,className:"mb-6",children:e.jsx(m,{mode:"multiple",loading:_.types[a],value:s.types,onChange:r=>ge(a,r),placeholder:"Select your specializations",size:"large",children:(ie[a]||[]).map(r=>e.jsx(x,{value:r.value,children:r.label},r.value))})})}),e.jsx(n.Item,{label:"Service Description",required:!0,children:e.jsx(b.TextArea,{rows:4,value:s.description,onChange:r=>{const t=[...y];t[a].description=r.target.value,w(t)},placeholder:"Describe your expertise...",size:"large"})})]},a)),e.jsxs(f,{type:"dashed",onClick:pe,block:!0,size:"large",className:"mb-8",children:[e.jsx(Ce,{className:"mr-2"})," Add Another Service"]}),e.jsx(n.Item,{label:"Languages Spoken",required:!0,children:e.jsx(m,{mode:"multiple",value:q,onChange:te,size:"large",children:Ee.map(s=>e.jsx(x,{value:s.value,children:s.label},s.value))})}),e.jsx(n.Item,{label:"Preferred Payment Method",required:!0,children:e.jsx(u,{name:"preferred_method",control:d,rules:{required:"Required"},render:({field:s})=>e.jsx(m,{size:"large",placeholder:"Select method",...s,children:Me.map(a=>e.jsx(x,{value:a.value,children:a.label},a.value))})})}),e.jsxs(n.Item,{children:[e.jsx(u,{name:"agreed_to_terms",control:d,rules:{required:"You must agree"},render:({field:s})=>e.jsxs(_e,{checked:s.value,onChange:a=>s.onChange(a.target.checked),children:["I agree to ",e.jsx("a",{href:"#",className:"text-purple-600",children:"Terms"})," & ",e.jsx("a",{href:"#",className:"text-purple-600",children:"Privacy Policy"})]})}),i.agreed_to_terms&&e.jsx("div",{className:"ant-form-item-explain-error",children:i.agreed_to_terms.message})]}),e.jsxs("div",{className:"flex justify-between mt-12",children:[e.jsxs(f,{size:"large",onClick:D,children:[e.jsx(W,{})," Back"]}),e.jsxs(f,{type:"primary",htmlType:"submit",loading:_.submitting,size:"large",style:{backgroundColor:"#5C039B",borderColor:"#5C039B"},children:["Complete Registration ",e.jsx(Y,{className:"ml-2"})]})]})]})]})]})]})})})};export{Le as default};
